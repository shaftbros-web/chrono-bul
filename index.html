<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chrono Bulward v0.2.33 (modular)</title>
<style>
  body { margin:0; background:#222; color:#eee; font-family:monospace; text-align:center; }
  #gameCanvas { background:#333; display:none; margin:0 auto; border:2px solid #000; }
  #gameArea { position:relative; width:400px; margin:0 auto; display:none; }
  #speedBtn { position:absolute; top:10px; right:10px; padding:4px 8px; }
  #menu, #settings, #help { margin-top:20px; }
  h1 { margin:20px; }
  .unit-settings { border:1px solid #555; padding:10px; margin:10px auto; width:90%; max-width:420px; text-align:left; }
  input[type=range] { width:230px; }
  #ui { margin-top:10px; display:none; }
  #ui button { margin:5px; padding:8px 16px; font-size:14px; }
  .unit-btn {
    margin:5px;
    padding:8px 16px;
    font-size:14px;
    color:#eee;
    background:linear-gradient(#555, #333);
    border:1px solid #666;
    cursor:pointer;
    transition:background 0.3s, transform 0.05s;
  }
  .unit-btn:hover {
    background:linear-gradient(#666, #444);
  }
  .unit-btn:active,
  .unit-btn.pressed {
    background:linear-gradient(#333, #111);
    transform:translateY(2px);
  }

  .special-btn {
    margin:5px;
    padding:8px 16px;
    font-size:14px;
    color:#fff;
    background:linear-gradient(#1e88e5, #0d47a1);
    border:1px solid #0d47a1;
    cursor:pointer;
    transition:background 0.3s, transform 0.05s, box-shadow 0.3s;
    box-shadow:0 0 5px rgba(30,136,229,0.7);
  }
  .special-btn:hover {
    background:linear-gradient(#2196f3,#1565c0);
    box-shadow:0 0 8px rgba(30,136,229,1);
  }
  .special-btn:active,
  .special-btn.pressed {
    background:linear-gradient(#0d47a1,#002171);
    transform:translateY(2px);
    box-shadow:0 0 3px rgba(0,0,0,0.5) inset;
  }
  .special-btn.selected {
    box-shadow:0 0 12px gold;
  }
  .special-btn:disabled {
    background:#555;
    color:#999;
    border:1px solid #444;
    box-shadow:none;
    cursor:not-allowed;
  }
  #help, #settings, #changelog { display:none; text-align:left; max-width:700px; margin:20px auto; padding:12px; background:#111; border:1px solid #555; }
  @keyframes manaBlink {
    0%, 100% { filter: drop-shadow(0 0 2px gold); opacity:1; }
    50% { filter: drop-shadow(0 0 10px gold); opacity:0.6; }
  }
  progress.mana-full {
    animation: manaBlink 1s linear infinite;
    filter: drop-shadow(0 0 2px gold);
  }
  #freezeBar { accent-color: blue; }
  #freezeBar::-webkit-progress-value { background: blue; }
  #freezeBar::-moz-progress-bar { background: blue; }
  #meteorBar { accent-color: red; }
  #meteorBar::-webkit-progress-value { background: red; }
  #meteorBar::-moz-progress-bar { background: red; }
  #healBar { accent-color: green; }
  #healBar::-webkit-progress-value { background: green; }
  #healBar::-moz-progress-bar { background: green; }

  /* ğŸ“± ã‚¹ãƒãƒ›è¡¨ç¤ºã§ç”»é¢ä¸‹éƒ¨ã®ã‚¹ãƒšã‚·ãƒ£ãƒ«UIãŒè¦‹åˆ‡ã‚Œãªã„ã‚ˆã†ã«èª¿æ•´ */
  @media (max-width: 480px) {
    #gameArea { width: 100%; }
    #gameCanvas {
      width: 100%;
      height: auto;
      max-height: calc(100dvh - 300px); /* UI åˆ†ã®é«˜ã•ã‚’å·®ã—å¼•ã„ã¦è¡¨ç¤ºé ˜åŸŸã«åã‚ã‚‹ */
    }
  }
</style>
</head>
<body>
<h1 id="title">
  <span id="titleText">Chrono Bulward</span>
  <button id="historyBtn" onclick="showChangelog()" style="margin-left:10px;">å¤‰æ›´å±¥æ­´</button>
</h1>

<div id="menu">
  <button onclick="startGame()">ã‚²ãƒ¼ãƒ é–‹å§‹</button>
  <button onclick="showSettings()">è¨­å®š</button>
  <button onclick="showHelp()">èª¬æ˜</button>
</div>

<!-- è¨­å®šç”»é¢ -->
<div id="settings">
  <h2>ãƒ¦ãƒ‹ãƒƒãƒˆèª¿æ•´</h2>
  <div id="unitSliders"></div>
  <div style="margin-top:8px;">
    <button onclick="backToMenu()">æˆ»ã‚‹</button>
    <button onclick="applySettingsAndStart()">ã‚²ãƒ¼ãƒ é–‹å§‹</button>
  </div>
</div>

<!-- èª¬æ˜ç”»é¢ -->
<div id="help">
  <h2>ã‚²ãƒ¼ãƒ ã®ãƒ«ãƒ¼ãƒ«</h2>
  <p>è‡ªé™£ï¼ˆä¸‹ï¼‰ã‹ã‚‰ãƒ¦ãƒ‹ãƒƒãƒˆã‚’å¬å–šã—ã€æ•µé™£ï¼ˆä¸Šï¼‰ã‹ã‚‰é€²è¡Œã—ã¦ãã‚‹æ•µã‚’é˜²ãã¾ã™ã€‚<br>
  ãƒ¦ãƒ‹ãƒƒãƒˆåŒå£«ãŒæ¥è§¦ã™ã‚‹ã¨æˆ¦é—˜é–‹å§‹ã€ã©ã¡ã‚‰ã‹ãŒå€’ã‚Œã‚‹ã¾ã§ç§»å‹•ã‚’åœæ­¢ã—ã¦æˆ¦é—˜ã‚’ç¶šã‘ã¾ã™ã€‚</p>

  <h2>å‹æ•—æ¡ä»¶</h2>
  <ul>
    <li>æ•µãƒ¦ãƒ‹ãƒƒãƒˆãŒè‡ªé™£ã«åˆ°é”ã™ã‚‹ã¨è‡ªé™£HPãŒæ¸›å°‘</li>
    <li>å‘³æ–¹ãƒ¦ãƒ‹ãƒƒãƒˆãŒæ•µé™£ã«åˆ°é”ã™ã‚‹ã¨æ•µé™£HPãŒæ¸›å°‘</li>
    <li>ã©ã¡ã‚‰ã‹ã®HPãŒ0ã«ãªã‚‹ã¨å‹æ•—ãŒæ±ºå®š</li>
  </ul>

  <h2>ä¸»è¦ãƒ¦ãƒ‹ãƒƒãƒˆ</h2>
  <ul>
    <li><b>ãƒŠã‚¤ãƒˆ</b>ï¼šè¿‘æ¥ã€‚æ¨™æº–çš„ãªè€ä¹…ã¨æ”»æ’ƒ</li>
    <li><b>ã‚¢ãƒ¼ãƒãƒ£ãƒ¼</b>ï¼šé è·é›¢ã€‚å°„ç¨‹å†…ã‚’æ”»æ’ƒ</li>
    <li><b>ã‚¯ãƒ¬ãƒªãƒƒã‚¯</b>ï¼šå›å¾©ã€‚å°„ç¨‹å†…ã®å‘³æ–¹ã‚’å›å¾©</li>
    <li><b>ã‚´ãƒ–ãƒªãƒ³/ã‚ªãƒ¼ã‚¯/ã‚´ãƒ¼ãƒ¬ãƒ </b>ï¼šæ•µã®å‰è¡›</li>
    <li><b>ã‚·ãƒ£ãƒ¼ãƒãƒ³/ãƒ•ã‚¡ãƒ³ãƒˆãƒ </b>ï¼šæ•µã®é éš”æ”»æ’ƒ</li>
  </ul>

  <button onclick="backToMenuFromHelp()">æˆ»ã‚‹</button>
</div>

<!-- å¤‰æ›´å±¥æ­´ç”»é¢ -->
<div id="changelog">
  <h2>å¤‰æ›´å±¥æ­´</h2>
    <ul>
      <li>v0.2.33 ãƒ€ãƒ¡ãƒ¼ã‚¸ã¨å›å¾©è¡¨ç¤ºã®æ–‡å­—ã‚µã‚¤ã‚ºã‚’èª¿æ•´ã€‚</li>
      <li>v0.2.32 ãƒ¦ãƒ‹ãƒƒãƒˆã¨æˆ¦é—˜ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã®è¡¨ç¤ºã‚’æ‹¡å¤§ã€‚</li>
      <li>v0.2.31 é éš”æ”»æ’ƒãƒ¦ãƒ‹ãƒƒãƒˆã®æŒ™å‹•ã‚’èª¿æ•´ã€‚</li>
      <li>v0.2.30 ã‚¹ãƒãƒ›è¡¨ç¤ºã§ç”»é¢ä¸‹éƒ¨ãŒè¦‹åˆ‡ã‚Œã‚‹å•é¡Œã‚’ä¿®æ­£ã€‚</li>
    <li>v0.2.29 ã‚¯ãƒ¬ãƒªãƒƒã‚¯ãŒå›å¾©å°„ç¨‹å†…ã§ã‚‚ç§»å‹•ã‚’ç¶™ç¶šã€‚</li>
    <li>v0.2.28 ã‚¿ã‚¤ãƒˆãƒ«ã¨ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’åŒæœŸã€‚</li>
    <li>v0.2.27 ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–ã•ã‚ŒãŸæ§‹æˆã€‚</li>
    <li>v0.2.26 UIã‚„ãƒãƒ©ãƒ³ã‚¹ã®èª¿æ•´ã€‚</li>
  </ul>
  <button onclick="backToMenuFromChangelog()">æˆ»ã‚‹</button>
</div>

<div id="gameArea">
  <canvas id="gameCanvas" width="400" height="600"></canvas>
  <button id="speedBtn" onclick="toggleSpeed()">x1</button>
</div>

<div id="ui">
  <div id="goldDisplay">Gold: 500</div>
  <button class="unit-btn" data-unit="swordsman" onclick="chooseUnit('swordsman')">ãƒŠã‚¤ãƒˆå¬å–š</button>
  <button class="unit-btn" data-unit="archer" onclick="chooseUnit('archer')">ã‚¢ãƒ¼ãƒãƒ£ãƒ¼å¬å–š</button>
  <button class="unit-btn" data-unit="healer" onclick="chooseUnit('healer')">ã‚¯ãƒ¬ãƒªãƒƒã‚¯å¬å–š</button>
</div>

<!-- ã‚¹ãƒšã‚·ãƒ£ãƒ«æ”»æ’ƒ UI -->
<div id="specialUI" style="display:none; position:relative; margin-top:10px; background:#111; padding:10px; border-top:2px solid #555;">
  <div>
    <label>â„ï¸ ãƒ•ãƒªãƒ¼ã‚º</label>
    <progress id="freezeBar" value="0" max="100"></progress>
    <button id="freezeBtn" class="special-btn" onclick="useSpecial('freeze')" disabled>ç™ºå‹•</button>
  </div>
  <div>
    <label>â˜„ï¸ ãƒ¡ãƒ†ã‚ª</label>
    <progress id="meteorBar" value="0" max="150"></progress>
    <button id="meteorBtn" class="special-btn" onclick="useSpecial('meteor')" disabled>ç™ºå‹•</button>
  </div>
  <div>
    <label>âœ¨ ãƒ’ãƒ¼ãƒªãƒ³ã‚°</label>
    <progress id="healBar" value="0" max="120"></progress>
    <button id="healBtn" class="special-btn" onclick="useSpecial('heal')" disabled>ç™ºå‹•</button>
  </div>
</div>

  
<!-- ã‚¹ã‚¯ãƒªãƒ—ãƒˆèª­ã¿è¾¼ã¿ï¼ˆé †ç•ªã«æ³¨æ„ï¼‰ -->
<script src="units.js" defer></script>
<script src="projectiles.js" defer></script>
<script src="ui.js" defer></script>
<script src="game.js" defer></script>
<!-- â˜… æœ€å¾Œã«èª­ã¿è¾¼ã‚€ -->
</body>
</html>
